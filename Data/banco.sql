CREATE TABLE ECM_CARTOES
(
    ID_CARTAO BIGINT IDENTITY(1, 1) NOT NULL,
    ID_CLIENTE BIGINT NOT NULL,
    NOME_TITULAR VARCHAR(255) NOT NULL,
    TIPO VARCHAR(10) NOT NULL,
    CPF_TITULAR VARCHAR(11) NOT NULL,
    NUMERO VARCHAR(20) NOT NULL,
    DATA_VALIDADE VARCHAR(6) NOT NULL,
    CODIGO_SEGURANCA VARCHAR(5) NOT NULL,
    DATA_CRIACAO DATETIME
        DEFAULT GETDATE() NULL,
    DATA_EDICAO DATETIME NULL,
    D_E_L_E_T_ CHAR(1)
        DEFAULT '' NULL,
)
GO
ALTER TABLE ECM_CARTOES
ADD CONSTRAINT ECM_CARTOES_PK
    PRIMARY KEY CLUSTERED (ID_CARTAO)
    WITH (ALLOW_PAGE_LOCKS = ON, ALLOW_ROW_LOCKS = ON)
GO

CREATE TABLE ECM_CLIENTES
(
    ID_CLIENTE BIGINT IDENTITY(1, 1) NOT NULL,
    NOME VARCHAR(255) NOT NULL,
    SOBRENOME VARCHAR(255) NOT NULL,
    CPF VARCHAR(11) NOT NULL,
    RG VARCHAR(9) NULL,
    DATA_NASCIMENTO DATE NULL,
    EMAIL VARCHAR(520) NOT NULL,
    SENHA VARCHAR(255) NOT NULL,
    SITUACAO BIT
        DEFAULT 0 NULL,
    GENERO VARCHAR(255) NULL,
    DATA_CRIACAO DATETIME
        DEFAULT GETDATE() NULL,
    DATA_EDICAO DATETIME NULL,
    D_E_L_E_T_ CHAR(1)
        DEFAULT '' NULL,
)
GO
ALTER TABLE ECM_CLIENTE
ADD CONSTRAINT ECM_CLIENTE_PK
    PRIMARY KEY CLUSTERED (ID_CLIENTE)
    WITH (ALLOW_PAGE_LOCKS = ON, ALLOW_ROW_LOCKS = ON)
GO

CREATE TABLE ECM_ENDERECOS
(
    ID_ENDERECO BIGINT IDENTITY(1, 1) NOT NULL,
    ID_CLIENTE BIGINT NOT NULL,
    CEP VARCHAR(8),
    TIPO_LOGRADOURO VARCHAR(25) NOT NULL,
    LOGRADOURO VARCHAR(520) NOT NULL,
    BAIRRO VARCHAR(255),
    CIDADE VARCHAR(255),
    ESTADO VARCHAR(2),
    NOME_ENDERECO VARCHAR(255),
    FRASE VARCHAR(255),
    TIPO_ENDERECO VARCHAR(25),
    PRINCIPAL BIT NOT NULL,
    DATA_CRIACAO DATETIME
        DEFAULT GETDATE() NULL,
    DATA_EDICAO DATETIME NULL,
    D_E_L_E_T_ CHAR(1)
        DEFAULT '' NULL,
)
GO
ALTER TABLE ECM_ENDERECOS
ADD CONSTRAINT ECM_ENDERECO_PK
    PRIMARY KEY CLUSTERED (ID_ENDERECO)
    WITH (ALLOW_PAGE_LOCKS = ON, ALLOW_ROW_LOCKS = ON)
GO

/** Chave estrangeira */
ALTER TABLE ECM_CARTOES
ADD CONSTRAINT FK_CARTAO_TO_CLIENTE_ECM
    FOREIGN KEY (ID_CLIENTE)
    REFERENCES ECM_CLIENTES (ID_CLIENTE) ON DELETE NO ACTION ON UPDATE NO ACTION
GO

ALTER TABLE ECM_ENDERECOS
ADD CONSTRAINT FK_ENDERECO_TO_CLIENTE_ECM
    FOREIGN KEY (ID_CLIENTE)
    REFERENCES ECM_CLIENTES (ID_CLIENTE) ON DELETE NO ACTION ON UPDATE NO ACTION
GO